数据id;名字;Buff类型;模型;成功几率;持续时间（毫秒）;执行间隔;表达式;结束表达式;参数
id;name;buffCategory;model;probability;continueTime;effectInterval;expression;endExpression;pars
1;物理伤害;1001;;1000;1;0;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n  math.randomseed(os.time())\n math.random()\n local rand = math.random()\n local damage = ownerP.damage*2.5/(1+0.0215*targetP.defend)\n local dodgeValue=ownerP.dodgeValue/(ownerP.dodgeValue+targetP.dodgeValue*9+1)\n local critValue = ownerP.critValue/(ownerP.critValue+targetP.critValue*4+1)\n if rand <= dodgeValue then \n   damage = 0 \n   target:DispatchBuffType(3,{"1","miss"})\n elseif dodgeValue<rand <= critValue +dodgeValue\n      damage = damage*1.5 \n      target:DispatchBuffType(3,{"2","crit"})\n  else\n    target:DispatchBuffType(3,{"3",tostring(math.floor(damage))})\n end\n targetP:RemoveHp(damage)\n target:CheckDeath(owner)       \n local bf1=targetP.hp\n local addMp=5\n\n if bf-bf1>targetP.maxHp*0.02 then  addMp=addMp+math.floor((bf-bf1)/0.02)+1  end\n\n if target.isDead==false and  (bf-bf1)>targetP.maxHp*0.04 then  \n  targetP:AddMp(math.floor((bf-bf1)/0.04)+1 )  \n target.roleSlider:ShowMpSlider() \nend\n\n if owner then  \n  owner.roleProperty:AddMp(addMp)  \n  if owner.roleSlider~=nil then owner.roleSlider:ShowMpSlider() end \n end\n end
2;法术伤害;1002;;1000;1;0;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n math.randomseed(os.time())\n math.random()\n local rand = math.random()\n\n local damage = ownerP.magicDamage*2.5/(1+0.0215*targetP.magicDefend)\n local dodgeValue=ownerP.dodgeValue/(ownerP.dodgeValue+targetP.dodgeValue*9+1)\n local critValue = ownerP.critValue/(ownerP.critValue+targetP.critValue*4+1)\n if rand <= dodgeValue then \n   damage = 0 \n   target:DispatchBuffType(3,{"1","miss"})\n elseif dodgeValue<rand <= critValue +dodgeValue\n      damage = damage*1.5 \n      target:DispatchBuffType(3,{"2","crit"})\n  else\n    target:DispatchBuffType(3,{"3",tostring(math.floor(damage))})\n end\n targetP:RemoveHp(damage)\n        \n target:CheckDeath(owner)\n local bf1=targetP.hp\n local addMp=4\n\n if bf-bf1>targetP.maxHp*0.02 then  addMp=addMp+4  end\n\n if target.isDead==false and  (bf-bf1)>targetP.maxHp*0.04 then  \n  targetP:AddMp(4)  \n target.roleSlider:ShowMpSlider() \nend\n\n if owner then  \n  owner.roleProperty:AddMp(addMp)  \n  if owner.roleSlider~=nil then owner.roleSlider:ShowMpSlider() end \n end\n end;;20
3;怒气增加;1003;;1000;-1;0; return function(buffAction,args)\n local owner = buffAction.actor\n owner.roleProperty:AddMp(50)\n if owner.roleSlider then owner.roleSlider.ShowMpSlider() end  \n end
400000;飙血的Buff;0;Ref_MoveLabelBuff,Hit_crit,Hit_blood;1000;-1;0;return function(buffAction,args)\n   if args then\n    local fxs = buffAction.buff.model\n    local source,clone,pos\n    local owner = buffAction.actor\n  if args[1]=="2" then\n      clone = PrefabPool:GetCache(fxs[1])\n      pos=owner.transform.position\n      pos.y=pos.y+1\n      clone.transform.position=pos\n      clone.gameObject:SetActive(true)\n  elseif args[1]=="3" then\n    clone = PrefabPool:GetCache(fxs[2])\n      pos=owner.transform.position\n      pos.y=pos.y+1\n      clone.transform.position=pos\n      clone.gameObject:SetActive(true)\n  end\n   source = PrefabPool:GetCache(fxs[0])\n   if source then\n        clone=source.gameObject \n        LuaHelper.SetParent(clone,MapAssistUIOtherRoot)\n        clone:SetActive(true)\n        local label=source.monos[0]\n        label.text = args[2]\n        pos=owner.transform.position\n        pos.y=pos.y+1\n        clone.transform.position=pos\n   local Random=Random\n   local paths = Vector3[3]\n   paths[0] = Vector3(pos.x,pos.y,pos.z)\n   paths[2] = Vector3(Random.Range(pos.x-1.5, pos.x+1.5), pos.y-1, Random.Range(pos.z-1.5, pos.z+1.5))\n   paths[1] = Vector3(paths[0].x+(paths[2].x-paths[0].x) / 2, paths[0].y+Random.Range(1,1.5),paths[0].z+(paths[2].z-paths[0].z) / 2)\n local t = {}\n     t["path"] = paths\n     t["movetopath"] = true\n     t["orienttopath"] = false\n     t["time"] = 1\n     t["delay"]=0\n     t["easetype"] = iTween.EaseType.linear\n     local has = iTween.HashLua(t)\n     toluaiTween.MoveTo(clone,has)\n   end\n    end\n end
9;立绘效果Buff;998;;1000;1;0; return function(buffAction,args)\n     toluacs.NGUIEvent.instance:OnCustomer("buffend",buffAction)    \n end
8;怒气聚集;999;skill_halo;1000;20000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n    local fxs = buff.model\n\n    local clone = PrefabPool:GetCache(fxs[0])\n\n    if clone then\n        local pos=owner.transform.position\n        clone.transform.position=pos\n        clone.gameObject:SetActive(true)\n        buffAction:AddCache(fxs[0],clone.gameObject)\n    end\n end;return function(buffAction,args)\n     buffAction:DeActiveAll()   \n end
5;中毒伤害;1004;;700;2000;500;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n  math.randomseed(os.time())\n math.random()\n local rand = math.random(0,1000)\n\n if rand<=buff.probability then\n  local damage = ownerP.magicDamage*2.5/(1+0.0215*targetP.magicDefend)\n  targetP:RemoveHp(damage)\n  target:DispatchBuffType(0,{"3",tostring(math.floor(damage))})\n  target:CheckDeath(owner)\n end\n end
6;1.5持续伤害;1004;;1000;2000;500;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n\n  local damage = ownerP.magicDamage*2.5/(1+0.0215*targetP.magicDefend)\n  targetP:RemoveHp(damage*1.5)\n  target:DispatchBuffType(3,{"3","big "..tostring(math.floor(damage))})\n  target:CheckDeath(owner)\n\n end
7;1.6持续伤害;1004;;1000;2000;500;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n\n  local damage = ownerP.damage*2.5/(1+0.0215*targetP.defend)\n  targetP:RemoveHp(damage*1.5)\n  target:DispatchBuffType(3,{"3","big "..tostring(math.floor(damage))})\n\n  target:CheckDeath(owner)\n\n end
400001;物理伤害;1001;;1000;1;0;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n local damage = ownerP.damage*2.5/(1+0.0215*targetP.defend)\n local dodgeValue=ownerP.dodgeValue/(ownerP.dodgeValue+targetP.dodgeValue*3+1)\n  local rand = math.random(0,1000) \nif rand <= dodgeValue then \n   damage = 0 \n   target:DispatchBuffType(0,{"1","[ff0000]".."miss"})\n else\n   local critValue = ownerP.critValue/(ownerP.critValue+targetP.critValue*3+1)\n   if rand <= critValue then \n     damage = damage*1.5 \n      target:DispatchBuffType(0,{"2","[ff0000]".."double"})\n  else\n    target:DispatchBuffType(0,{"1","[ff0000]"..tostring(math.floor(damage))})\n    end\n end\n targetP:RemoveHp(damage)\n      \n target:CheckDeath(owner)\n local bf1=targetP.hp\n local addMp=5\n\n if bf-bf1>targetP.maxHp*0.02 then  addMp=addMp+5  end\n\n if targetP.hp>0 and  (bf-bf1)>targetP.maxHp*0.04 then  \n  targetP:AddMp(5)  \n target.roleSlider:ShowMpSlider() \nend\n\nif targetP.hp<=0 then   addMp=addMp+50  end\n if owner then  \n  owner.roleProperty:AddMp(addMp)  \n  if owner.roleSlider~=nil then owner.roleSlider:ShowMpSlider() end \n end\n end
400002;怒气伤害;1002;;1000;1;0;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n math.randomseed(os.time())\n math.random()\n local rand = math.random()\n\n local damage = ownerP.magicDamage*2.5/(1+0.0215*targetP.magicDefend)\n local dodgeValue=ownerP.dodgeValue/(ownerP.dodgeValue+targetP.dodgeValue*3+1)\n if rand <= dodgeValue then \n   damage = 0 \n   target:DispatchBuffType(0,{"1","[ff0000]".."miss"})\n else\n   local critValue = ownerP.critValue/(ownerP.critValue+targetP.critValue*3+1)\n   if rand <= critValue then \n     damage = damage*1.5 \n      target:DispatchBuffType(0,{"2","[ff0000]".."double"})\n  else\n    target:DispatchBuffType(0,{"3","[ff0000]"..tostring(math.floor(damage))})\n    end\n end\n targetP:RemoveHp(damage)\n        \n target:CheckDeath(owner)\n local bf1=targetP.hp\n local addMp=4\n\n if bf-bf1>targetP.maxHp*0.02 then  addMp=addMp+4  end\n\n if targetP.hp>0 and  (bf-bf1)>targetP.maxHp*0.04 then  \n  targetP:AddMp(4)  \n target.roleSlider:ShowMpSlider() \nend\n\nif targetP.hp<=0 then   addMp=addMp+50  end\n if owner then  \n  owner.roleProperty:AddMp(addMp)  \n  if owner.roleSlider~=nil then owner.roleSlider:ShowMpSlider() end \n end\n end
400003;怒气回复;1003;;1000;1;0; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty:AddMp(50)\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400004;生命伤害-灼烧;1004;;1000;5000;500;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n  math.randomseed(os.time())\n math.random()\n local rand = math.random(0,1000)\n\n if rand<=buff.probability then\n  local damage = ownerP.magicDamage*2.5/(1+0.0215*targetP.magicDefend)\n  targetP:RemoveHp(damage)\n  target:DispatchBuffType(0,{"3","[ff0000]"..tostring(math.floor(damage))})\n  target:CheckDeath(owner)\n end\n end
400005;生命伤害-流血;1005;;1000;5000;500;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n\n  local damage = ownerP.magicDamage*2.5/(1+0.0215*targetP.magicDefend)\n  targetP:RemoveHp(damage)\n  target:DispatchBuffType(0,{"3","[ff0000]"..tostring(math.floor(damage))})\n  target:CheckDeath(owner)\n end
400006;生命伤害-中毒;1006;;1000;5000;500;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n  math.randomseed(os.time())\n math.random()\n local rand = math.random(0,1000)\n\n if rand<=buff.probability then\n  local damage = ownerP.magicDamage*2.5/(1+0.0215*targetP.magicDefend)\n  targetP:RemoveHp(damage)\n  target:DispatchBuffType(0,{"3","[ff0000]"..tostring(math.floor(damage))})\n  target:CheckDeath(owner)\n end\n end
400007;物理攻击提升;1007;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_damage=owner.roleProperty.p_damage+50\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400008;法术攻击提升;1008;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_magicDamage=owner.roleProperty.p_magicDamage+50\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400009;物理防御提升;1009;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_defend=owner.roleProperty.p_defend+50\n \n end
400010;法术防御提升;1010;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_magicDefend=owner.roleProperty.p_magicDefend+50\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400011;最大生命提升;1011;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_maxMp=owner.roleProperty.p_maxMp+50\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400012;攻击速度提升;1012;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_attackSpeed=0.5\n\n end
400013;移动速度提升;1013;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_speed=1\n\n end
400014;暴击提升;1014;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_critValue=50\n  \n end
400015;闪避提升;1015;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_dodgeValue=50\n\n end
400016;物理攻击降低;1016;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_damage=owner.roleProperty.p_damage-50\n end
400017;法术攻击降低;1017;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_magicDamage=owner.roleProperty.p_magicDamage-50\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400018;物理防御降低;1018;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_defend=owner.roleProperty.p_defend-50\n \n end
400019;法术防御降低;1019;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_magicDefend=owner.roleProperty.p_magicDefend-50\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400020;最大生命降低;1020;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_maxMp=owner.roleProperty.p_maxMp-50\n if owner.roleSlider then owner.roleSlider:ShowMpSlider() end  \n end
400021;攻击速度降低;1021;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_attackSpeed=-0.5\n\n end
400022;移动速度降低;1022;;1000;5000;500;return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_speed=-1\n\n end
400023;暴击降低;1023;;1000;5000;500;  return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_critValue=-50\n  \n end
400024;闪避降低;1024;;1000;5000;500; return function(buffAction,args)\n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n owner.roleProperty.p_dodgeValue=-50\n\n end
400025;眩晕-重击;1025;;1000;1;0
400026;眩晕-冰冻;1026;;1000;1;0
400027;混乱-;1027;;1000;1;0
400028;睡眠-无法行动，攻击后解除;1028;;1000;1;0
400029;魅惑;1029;;1000;1;0
400030;恐惧;1030;;1000;1;0
400031;沉默;1031;;1000;1;0
400032;减速;1032;;1000;1;0
400033;绝对防御;1033;;1000;1;0
400034;减益免疫;1034;;1000;1;0
400035;增益免疫;1035;;1000;1;0
400036;控制免疫;1036;;1000;1;0
400037;伤害加深;1037;;1000;1;0
400038;伤害减少;1038;;1000;1;0
400039;生命恢复-治疗;1039;;1000;5000;1000;return function(buffAction,args) \n local owner,target,skill,buff=buffAction.actor,buffAction.target,buffAction.skill,buffAction.buff\n local targetP = target.roleProperty \n local ownerP=owner.roleProperty\n local bf=targetP.hp\n \n  local damage = 25\n  targetP:AddHp(damage)\n\n  target:DispatchBuffType(0,{"4","[00ff00]+"..tostring(math.floor(damage))})\n   if owner.roleSlider then owner.roleSlider:ShowHpSlider() end  \n end
400040;召唤小兵;1040;;1000;0;30000; return function(buffAction,args)\n   local battleUI = LuaItemManager:getItemObject("battleMap")\n   battleUI:buildSolider(buffAction,args)\n end;;
